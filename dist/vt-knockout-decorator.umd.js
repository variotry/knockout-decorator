(function(c,m){typeof exports=="object"&&typeof module<"u"?m(exports):typeof define=="function"&&define.amd?define(["exports"],m):(c=typeof globalThis<"u"?globalThis:c||self,m(c.KnockoutDecorator={}))})(this,function(c){"use strict";/*!
* Knockout decorator
* (c) vario
* License: MIT (http://www.opensource.org/licenses/mit-license.php)
*/c.KnockoutDecorator=void 0,(f=>{function E(e){let t;if(typeof e=="function")t={pureComputed:!0};else{t=e;let n={pureComputed:!0};if(!t)t=n;else for(let s in n)t[s]===void 0&&(t[s]=n[s])}function r(n){var s,i;let l=h.Get(n);const a=(i=class extends n{constructor(...d){super(...d),this[s]=`kd${n.name}`;let o=this,k=Object.keys(o),g=k.length;for(let b=0;b<g;++b){let u=k[b];if(u===p.Key||l.isIgnoreProperty(u)||x(o,u)||I(o,u))continue;let y=o[u];delete o[u],Array.isArray(y)?K(a.prototype,u):F(a.prototype,u),o[u]=y}let S=Object.keys(n.prototype),j=[];g=S.length;for(let b=0;b<g;++b){let u=S[b],y=Object.getOwnPropertyDescriptor(n.prototype,u);if(!y||!y.get||l.isIgnoreProperty(u)||(o[u],_(o,u)))continue;G({pure:t.pureComputed})(a.prototype,u,y),Object.defineProperty(a.prototype,u,y),j.push(u)}g=j.length;for(let b=0;b<g;++b)o[j[b]];t.init&&typeof o[t.init]=="function"&&o[t.init]()}},s=Symbol.toStringTag,i);return Object.defineProperty(a,"name",{get:()=>`kd${n.name}`}),a}return typeof e=="function"?r(e):function(n){return r(n)}}f.track=E;function w(e,t){h.Get(e).pushIgnoreProperty(t)}f.ignore=w;function F(e,t){Object.defineProperty(e,t,{get:function(){return p.Get(this).makeObservable(t),this[t]},set:function(r){p.Get(this).makeObservable(t),this[t]=r}})}f.observable=F;function K(e,t){Object.defineProperty(e,t,{get:function(){return p.Get(this).makeObservableArray(t),this[t]},set:function(r){p.Get(this).makeObservableArray(t),this[t]=r}})}f.observableArray=K;function T(){if(arguments.length==1)return G(arguments[0]);G(null).apply(this,arguments)}f.computed=T;function M(e,t,r){G({pure:!0})(e,t,r)}f.pureComputed=M;function $(e){return(t,r,n)=>{h.Get(t).pushKoExtend(r,e)}}f.extend=$;function v(e){return(t,r)=>{h.Get(t).pushSetFilter(r,e)}}f.setFilter=v;function q(e,t){h.Get(e).pushSetFilter(t,r=>!r||typeof r=="number"?r:(r=parseFloat(r),isNaN(r)?0:r))}f.asNumber=q;function D(e){return v(t=>t<e?e:t)}f.min=D;function z(e){return v(t=>t>e?e:t)}f.max=z;function B(e,t){if(e>t){let r=e;e=t,t=r}return v(r=>(r<e?r=e:r>t&&(r=t),r))}f.clamp=B;function x(){if(typeof arguments[0]=="function"){O=null,arguments[0]();let e=O;return O=null,e}else{let e=arguments[0],t=arguments[1];return p.Get(e).getObservable(t)}}f.getObservable=x;function I(){if(typeof arguments[0]=="function"){A=null,arguments[0]();let e=A;return O=null,e}else{let e=arguments[0],t=arguments[1];return p.Get(e).getObservableArray(t)}}f.getObservableArray=I;function _(){if(typeof arguments[0]=="function"){C=null,arguments[0]();let e=C;return C=null,e}else{let e=arguments[0],t=arguments[1];return p.Get(e).getComputed(t)}}f.getComputed=_;function G(e){return(t,r,n)=>{let s=n.get;if(!s)throw"@Computed and @pureComputed require getter.";let i=n.set;n.get=function(){return p.Get(this).makeComputed(r,s,i,e),this[r]},i&&(n.set=function(l){p.Get(this).makeComputed(r,s,i,e),this[r]=l})}}let O=null,A=null,C=null;const H=class{static Get(e){return e=typeof e=="function"?e.prototype:e,e[H.Key]||(e[H.Key]=new this),e[H.Key]}pushIgnoreProperty(e){this.ignoreProperties||(this.ignoreProperties=[]),this.ignoreProperties.push(e)}isIgnoreProperty(e){return this.ignoreProperties!=null&&this.ignoreProperties.indexOf(e)!=-1}pushKoExtend(e,t){this.extendsHash||(this.extendsHash={}),this.extendsHash[e]||(this.extendsHash[e]=[]),this.extendsHash[e].push(t)}applyKoExtend(e,t){if(!this.extendsHash)return;let r=this.extendsHash[e];if(!r)return;let n=r.length;for(let s=0;s<n;++s)t.extend(r[s])}pushSetFilter(e,t){this.setFiltersHash||(this.setFiltersHash={});let r=this.setFiltersHash[e];r||(r=this.setFiltersHash[e]=[]),r.push(t)}getSetter(e,t){if(!this.setFiltersHash)return t;let r=this.setFiltersHash[e];if(!r)return t;let n=r.length;return s=>{for(let i=0;i<n;++i)s=r[i](s);t(s)}}constructor(){}};let h=H;h.Key="__vtKnockoutDecoratorClassInfo__";const P=class{constructor(e){this.koObservableHash={},this.koObservableArrayHash={},this.koComputedHash={},this.target=e}static Get(e){return e[P.Key]||(e[P.Key]=new this(e)),e[P.Key]}makeObservable(e){let t=ko.observable();this.koObservableHash[e]=t;let r=Object.getPrototypeOf(this.target),n=h.Get(r);n.applyKoExtend(e,t),h.Get(r),Object.defineProperty(this.target,e,{get:()=>(O=t,t()),set:n.getSetter(e,t)})}makeObservableArray(e){function t(l,a){let d={};["splice","pop","push","shift","unshift","reverse","sort"].forEach(o=>{d[o]=l[o];let k=function(){l[o]=d[o];let g=a[o].apply(a,arguments);return l[o]=k,g};l[o]=k})}function r(l,a){["replace","remove","removeAll","destroy","destroyAll"].forEach(d=>{l[d]=function(){return a[d].apply(a,arguments)}})}let n=ko.observableArray();this.koObservableArrayHash[e]=n;let s=Object.getPrototypeOf(this.target),i=h.Get(s);i.applyKoExtend(e,n),h.Get(s),Object.defineProperty(this.target,e,{get:()=>(A=n,n()),set:function(l){l&&(t(l,n),r(l,n)),i.getSetter(e,n)(l)}})}makeComputed(e,t,r,n){let s={read:t,write:r,owner:this.target};if(n)for(let d in n)s[d]=n[d];let i=ko.computed(s);this.koComputedHash[e]=i;let l=Object.getPrototypeOf(this.target),a=h.Get(l);a.applyKoExtend(e,i),Object.defineProperty(this.target,e,{get:()=>(C=i,i()),set:r!=null?a.getSetter(e,i):void 0})}getObservable(e){return this.koObservableHash[e]}getObservableArray(e){return this.koObservableArrayHash[e]}getComputed(e){return this.koComputedHash[e]}};let p=P;p.Key="__vtKnockoutDecoratorObjInfo__"})(c.KnockoutDecorator||(c.KnockoutDecorator={}));const m=c.KnockoutDecorator;c.default=m,Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
